---
title: "EDA"
author: "Team 23"
date: "`r Sys.Date()`"
output: pdf_document
---

# Cleaning and EDA for group_standings.csv dataset

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# Install dependencies here (if necessary, change to 00_req text)
library(tidyverse)
library(stringr)

```

```{r}
df_group_standings <- read_csv("group_standings.csv")

head(df_group_standings, 200)
```

```{r}
# Basic cleaning
df_group_standings_clean <- df_group_standings[, c("tournament_id", "team_name", "team_code", "played", "wins", "draws", "losses", "goals_for", "goals_against", "goal_difference", "points", "advanced")]

df_group_standings_clean <- mutate(
  df_group_standings_clean,
  across(where(is.character), trimws),
  across(c(played, wins, draws, losses, goals_for, goals_against, goal_difference, points, advanced), as.numeric)
)

df_group_standings_clean$year <- sub(".*(\\d{4}).*", "\\1", df_group_standings_clean$tournament_id)

head(df_group_standings_clean)
```

## Exploratory Data Analysis (visualizations)

### Relationship between goals scored and points
```{r}
plot(jitter(df_group_standings_clean$goals_for),
     jitter(df_group_standings_clean$points),
     xlab = "Goals Scored",
     ylab = "Points Earned",
     main = "Relationship between goals scored and points",
     pch = 1)

model <- lm(points ~ goals_for, data = df_group_standings_clean)
abline(model, col="blue")
```

#### Analysis 

This graph plots the relationship between goals scored and points throughout the tournament(s), and there exists an expectation; teams that score more goals will tend to earn more points. Thus, given this plot gives a positive linear relationship the plot behaves as an initial sanity check of the dataset. Looking into the graph, we can see that most teams score less than 10 goals scored throughout the tournament, suggesting the majority of the teams have a strong defense or the games are low-scoring (a hypothesis worth exploring further). Additionally, a large cluster of teams is around the 4 points and less than 5 goals scored, this shows us that majority of teams do not advance far into the tournament. Conversely, teams outside these ranges like correspond to teams progressing to the later stages of the tournament, which can be an invaluable trend that can help towards predicting future games.

